<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SIFT3D: SIFT3D</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">SIFT3D<span id="projectnumber">&#160;2.0</span>
   </div>
   <div id="projectbrief">SIFT descriptors extended to 3D</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">SIFT3D </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="mainpage"></a> </p>
<h1><a class="anchor" id="autotoc_md0"></a>
Introduction</h1>
<p>SIFT3D is an analogue of the scale-invariant feature transform (SIFT) for three-dimensional images. It leverages volumetric data and real-world units to detect keypoints and extract a robust description of their content.</p>
<p>The original work is by Blaine Rister et al. and this is a refactored and bugfixed version.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Dependencies</h1>
<p>To build SIFT3D yo'll need:</p>
<ul>
<li>LAPACK</li>
<li>cmake (build-only dependency)</li>
<li>nifticlib (optional, for examples)</li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
Typical workflow</h1>
<p>This is a typical workflow. All error checks are omitted for clarity, but you should check error codes returned by SIFT3D:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="imtypes_8h.html">sift3d/imtypes.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;sift3d/imutils.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="sift_8h.html">sift3d/sift.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// The input must be in column-major format, which is unnatural for C,</span></div>
<div class="line"><span class="comment">// but the author of the original code chose this order.</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> get_descriptors (<span class="keywordtype">float</span> *array, <span class="keywordtype">int</span> nx, <span class="keywordtype">int</span> ny, <span class="keywordtype">int</span> nz) {</div>
<div class="line">    <span class="comment">// At first we create an image object</span></div>
<div class="line">    <span class="keywordtype">int</span> nc = 1;</div>
<div class="line">    sift3d_image *image = <a class="code hl_function" href="imutil_8h.html#a07edb3f395d669697059e04d6053707c">sift3d_make_image</a> (nx, ny, nz, nc);</div>
<div class="line">    <span class="keywordtype">float</span> *data = <a class="code hl_function" href="imutil_8h.html#a2c0c95acc43894e90f285c1ddc2aebb4">sift3d_image_data</a> (image);</div>
<div class="line">    <span class="comment">// Axial strides are guaranteed to be nc, nc * nx, nc * nx * ny</span></div>
<div class="line">    <span class="comment">// and the total number of elements is nc * nx * ny * nz</span></div>
<div class="line">    memcpy (data, array, nx * ny * nz * <span class="keyword">sizeof</span> (<span class="keywordtype">float</span>));</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create a keypoint detector and a storage for keypoints and descriptors</span></div>
<div class="line">    sift3d_detector *detector = <a class="code hl_function" href="sift_8h.html#ac585bbbd6d38036f6690a04f6c126b80">sift3d_make_detector</a>();</div>
<div class="line">    sift3d_detector *kps = <a class="code hl_function" href="sift_8h.html#a374d4a3f7aec398bdd49035e71633094">sift3d_make_keypoint_store</a>();</div>
<div class="line">    sift3d_detector *descs = <a class="code hl_function" href="sift_8h.html#a0fc690048f960480e4ae24ba929ba1f7">sift3d_make_descriptor_store</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Detect keypoints</span></div>
<div class="line">    <a class="code hl_function" href="sift_8h.html#aeb265b50d46c3052db314d9d0e936403">sift3d_detect_keypoints</a> (detector, image, kps);</div>
<div class="line">    <span class="comment">// Extract descriptors</span></div>
<div class="line">    <a class="code hl_function" href="sift_8h.html#a7e21d29726ebd64d4ea42158ca94fcdd">sift3d_extract_descriptors</a> (detector, kps, descs);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create a matrix</span></div>
<div class="line">    sift3d_mat_rm *mat = <a class="code hl_function" href="imutil_8h.html#a4f0fbd6751789fac13e42371ec492c69">sift3d_make_mat_rm</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Copy descriptors to a matrix</span></div>
<div class="line">    <a class="code hl_function" href="sift_8h.html#ac862fd0863fc94cd16fc5ae7d6e70358">sift3d_descriptor_store_to_mat_rm</a> (descs, mat);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Get descriptors</span></div>
<div class="line">    <span class="keywordtype">void</span> *desc_data = <a class="code hl_function" href="imutil_8h.html#ad515492153afca4bbeba615db7878588">sift3d_mat_rm_data</a> (mat);</div>
<div class="line">    <span class="comment">// Get dimensions</span></div>
<div class="line">    <span class="keywordtype">int</span> cols, rows;</div>
<div class="line">    <a class="code hl_function" href="imutil_8h.html#ad7df20be12be54078e784169f4565a04">sift3d_mat_rm_dimensions</a> (mat, &amp;cols, &amp;rows);</div>
<div class="line">    <span class="comment">// Get element type, should be SIFT3D_FLOAT, desc_data can be cast to float*</span></div>
<div class="line">    <a class="code hl_enumeration" href="imtypes_8h.html#ac099f850ef2ae58425aad87afaa8cf58">sift3d_mat_type</a> type = <a class="code hl_function" href="imutil_8h.html#ad0c5b78c17dab4c8b850c9030b98c393">sift3d_mat_rm_type</a> (mat);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Do cleanup</span></div>
<div class="line">    <a class="code hl_function" href="imutil_8h.html#a07875614037aa5dbceec67a9ff5f20ff">sift3d_free_image</a> (image);</div>
<div class="line">    <a class="code hl_function" href="sift_8h.html#a6b34776c028777a57a2c177ea231c83f">sift3d_free_detector</a> (detector);</div>
<div class="line">    <a class="code hl_function" href="sift_8h.html#a7c3f0d44b4cc3f60df4cc71b54d094dc">sift3d_free_descriptor_store</a> (descs);</div>
<div class="line">    <a class="code hl_function" href="sift_8h.html#a01d529dc12e211013fe14aa8fc9ead91">sift3d_free_keypoint_store</a> (kps);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Do what you want with the descriptors</span></div>
<div class="line">    ;</div>
<div class="line">    <span class="comment">// Free the matrix</span></div>
<div class="line">    <a class="code hl_function" href="imutil_8h.html#a5f931bcbe5f3115b7d10439875c7c4d1">sift3d_free_mat_rm</a> (mat);</div>
<div class="line">}</div>
<div class="ttc" id="aimtypes_8h_html"><div class="ttname"><a href="imtypes_8h.html">imtypes.h</a></div><div class="ttdoc">Types and constants.</div></div>
<div class="ttc" id="aimtypes_8h_html_ac099f850ef2ae58425aad87afaa8cf58"><div class="ttname"><a href="imtypes_8h.html#ac099f850ef2ae58425aad87afaa8cf58">sift3d_mat_type</a></div><div class="ttdeci">sift3d_mat_type</div><div class="ttdef"><b>Definition</b> imtypes.h:40</div></div>
<div class="ttc" id="aimutil_8h_html_a07875614037aa5dbceec67a9ff5f20ff"><div class="ttname"><a href="imutil_8h.html#a07875614037aa5dbceec67a9ff5f20ff">sift3d_free_image</a></div><div class="ttdeci">SIFT3D_EXPORT void sift3d_free_image(sift3d_image *)</div><div class="ttdoc">Destroy an image.</div></div>
<div class="ttc" id="aimutil_8h_html_a07edb3f395d669697059e04d6053707c"><div class="ttname"><a href="imutil_8h.html#a07edb3f395d669697059e04d6053707c">sift3d_make_image</a></div><div class="ttdeci">SIFT3D_EXPORT sift3d_image * sift3d_make_image(const int nx, const int ny, const int nz, const int nc)</div><div class="ttdoc">Make an image with specified dimensions.</div></div>
<div class="ttc" id="aimutil_8h_html_a2c0c95acc43894e90f285c1ddc2aebb4"><div class="ttname"><a href="imutil_8h.html#a2c0c95acc43894e90f285c1ddc2aebb4">sift3d_image_data</a></div><div class="ttdeci">SIFT3D_EXPORT float * sift3d_image_data(const sift3d_image *)</div><div class="ttdoc">Get a pointer to the image's data.</div></div>
<div class="ttc" id="aimutil_8h_html_a4f0fbd6751789fac13e42371ec492c69"><div class="ttname"><a href="imutil_8h.html#a4f0fbd6751789fac13e42371ec492c69">sift3d_make_mat_rm</a></div><div class="ttdeci">SIFT3D_EXPORT sift3d_mat_rm * sift3d_make_mat_rm()</div><div class="ttdoc">Create a matrix.</div></div>
<div class="ttc" id="aimutil_8h_html_a5f931bcbe5f3115b7d10439875c7c4d1"><div class="ttname"><a href="imutil_8h.html#a5f931bcbe5f3115b7d10439875c7c4d1">sift3d_free_mat_rm</a></div><div class="ttdeci">SIFT3D_EXPORT void sift3d_free_mat_rm(sift3d_mat_rm *)</div><div class="ttdoc">Destroy a matrix.</div></div>
<div class="ttc" id="aimutil_8h_html_ad0c5b78c17dab4c8b850c9030b98c393"><div class="ttname"><a href="imutil_8h.html#ad0c5b78c17dab4c8b850c9030b98c393">sift3d_mat_rm_type</a></div><div class="ttdeci">SIFT3D_EXPORT sift3d_mat_type sift3d_mat_rm_type(const sift3d_mat_rm *)</div><div class="ttdoc">Get the type of elements in a matrix.</div></div>
<div class="ttc" id="aimutil_8h_html_ad515492153afca4bbeba615db7878588"><div class="ttname"><a href="imutil_8h.html#ad515492153afca4bbeba615db7878588">sift3d_mat_rm_data</a></div><div class="ttdeci">SIFT3D_EXPORT void * sift3d_mat_rm_data(sift3d_mat_rm *)</div><div class="ttdoc">Get a pointer to the data array of a matrix.</div></div>
<div class="ttc" id="aimutil_8h_html_ad7df20be12be54078e784169f4565a04"><div class="ttname"><a href="imutil_8h.html#ad7df20be12be54078e784169f4565a04">sift3d_mat_rm_dimensions</a></div><div class="ttdeci">SIFT3D_EXPORT void sift3d_mat_rm_dimensions(const sift3d_mat_rm *, int *num_cols, int *num_rows)</div><div class="ttdoc">Get dimensions of a matrix.</div></div>
<div class="ttc" id="asift_8h_html"><div class="ttname"><a href="sift_8h.html">sift.h</a></div><div class="ttdoc">Detection of keypoints and calculation of descriptors.</div></div>
<div class="ttc" id="asift_8h_html_a01d529dc12e211013fe14aa8fc9ead91"><div class="ttname"><a href="sift_8h.html#a01d529dc12e211013fe14aa8fc9ead91">sift3d_free_keypoint_store</a></div><div class="ttdeci">SIFT3D_EXPORT void sift3d_free_keypoint_store(sift3d_keypoint_store *)</div><div class="ttdoc">Destroy a keypoint store.</div></div>
<div class="ttc" id="asift_8h_html_a0fc690048f960480e4ae24ba929ba1f7"><div class="ttname"><a href="sift_8h.html#a0fc690048f960480e4ae24ba929ba1f7">sift3d_make_descriptor_store</a></div><div class="ttdeci">SIFT3D_EXPORT sift3d_descriptor_store * sift3d_make_descriptor_store()</div><div class="ttdoc">Create an empty descriptor store.</div></div>
<div class="ttc" id="asift_8h_html_a374d4a3f7aec398bdd49035e71633094"><div class="ttname"><a href="sift_8h.html#a374d4a3f7aec398bdd49035e71633094">sift3d_make_keypoint_store</a></div><div class="ttdeci">SIFT3D_EXPORT sift3d_keypoint_store * sift3d_make_keypoint_store()</div><div class="ttdoc">Create an empty keypoint store.</div></div>
<div class="ttc" id="asift_8h_html_a6b34776c028777a57a2c177ea231c83f"><div class="ttname"><a href="sift_8h.html#a6b34776c028777a57a2c177ea231c83f">sift3d_free_detector</a></div><div class="ttdeci">SIFT3D_EXPORT void sift3d_free_detector(sift3d_detector *)</div><div class="ttdoc">Destroy a detector.</div></div>
<div class="ttc" id="asift_8h_html_a7c3f0d44b4cc3f60df4cc71b54d094dc"><div class="ttname"><a href="sift_8h.html#a7c3f0d44b4cc3f60df4cc71b54d094dc">sift3d_free_descriptor_store</a></div><div class="ttdeci">SIFT3D_EXPORT void sift3d_free_descriptor_store(sift3d_descriptor_store *)</div><div class="ttdoc">Destroy a descriptor store.</div></div>
<div class="ttc" id="asift_8h_html_a7e21d29726ebd64d4ea42158ca94fcdd"><div class="ttname"><a href="sift_8h.html#a7e21d29726ebd64d4ea42158ca94fcdd">sift3d_extract_descriptors</a></div><div class="ttdeci">SIFT3D_EXPORT int sift3d_extract_descriptors(sift3d_detector *const detector, const sift3d_keypoint_store *const kp_store, sift3d_descriptor_store *const desc_store)</div><div class="ttdoc">Extract descriptors from the keypoints.</div></div>
<div class="ttc" id="asift_8h_html_ac585bbbd6d38036f6690a04f6c126b80"><div class="ttname"><a href="sift_8h.html#ac585bbbd6d38036f6690a04f6c126b80">sift3d_make_detector</a></div><div class="ttdeci">SIFT3D_EXPORT sift3d_detector * sift3d_make_detector()</div><div class="ttdoc">Create a detector.</div></div>
<div class="ttc" id="asift_8h_html_ac862fd0863fc94cd16fc5ae7d6e70358"><div class="ttname"><a href="sift_8h.html#ac862fd0863fc94cd16fc5ae7d6e70358">sift3d_descriptor_store_to_mat_rm</a></div><div class="ttdeci">SIFT3D_EXPORT int sift3d_descriptor_store_to_mat_rm(const sift3d_descriptor_store *const, sift3d_mat_rm *const)</div><div class="ttdoc">Copy descriptors to a matrix.</div></div>
<div class="ttc" id="asift_8h_html_aeb265b50d46c3052db314d9d0e936403"><div class="ttname"><a href="sift_8h.html#aeb265b50d46c3052db314d9d0e936403">sift3d_detect_keypoints</a></div><div class="ttdeci">SIFT3D_EXPORT int sift3d_detect_keypoints(sift3d_detector *const detector, const sift3d_image *const image, sift3d_keypoint_store *const store)</div><div class="ttdoc">Detect keypoints in the image.</div></div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
